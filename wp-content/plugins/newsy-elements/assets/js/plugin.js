!function(v){"use strict";window.newsy=window.newsy||{};var e=v("body"),n="1"===newsy_block_loc.rtl;window.newsy.video={play_flag:!0,sound_flag:!1,current_el:!1,init:function(a){void 0===a&&(a=v("body"));var e=this,i=!1;v(a).find(".ak-video-player").length&&(v(a).find(".ak-video-player").each(function(){var a,i,t;v(this).hasClass("inited")||(v(this).addClass("inited"),a=v(this).data("type"),i=v(this).data("autoplay"),t=v(this).data("repeat"),"youtube"===a?e.init_video_youtube(v(this),i,t):"video"===a?e.init_video_html5(v(this)):"vimeo"===a?e.init_video_vimeo(v(this),i,t):"soundcloud"===a?e.init_soundcloud(v(this)):"audio"===a&&e.init_audio(v(this)))}),i=!0),v(a).find('.ak-featured-thumb.size-auto img[data-src$=".gif"]').length&&(v(a).find('.ak-featured-thumb.size-auto img[data-src$=".gif"]').each(function(a,i){v(this).hasClass("inited")||(v(this).addClass("inited"),v(i).attr("onload","newsy.video.init_gif(this)"))}),i=!0),i&&v(window).on("blur",function(){e.play_flag=!1,e.sound_flag=!1,e.stopPlay()})},init_video_youtube:function(a,i,t){var e=this.youtube_parser(v(a).attr("data-src")),n="",o="",o=t?'<iframe class="lazyload" width="700" height="500" data-src="//www.youtube.com/v/'+e+"?version=3&"+(n=n+(i||"true"==i?"autoplay=1&":"")+(t||"true"==t?"loop=1&playlist="+e:""))+'showinfo=0&theme=light&autohide=1&rel=0&wmode=opaque" frameborder="0" allowfullscreen></iframe>':'<iframe class="lazyload" width="700" height="500" data-src="//www.youtube.com/embed/'+e+"?"+(n+=i||"true"==i?"autoplay=1&":"")+'showinfo=0&theme=light&autohide=1&rel=0&wmode=opaque" frameborder="0" allowfullscreen></iframe>';v(".ak-video-container",a).append(o)},init_video_vimeo:function(a,i,t){var e="",e='<iframe class="lazyload" data-src="//player.vimeo.com/video/'+this.vimeo_parser(v(a).attr("data-src"))+"?"+(e+(i||"true"==i?"autoplay=1&":"")+(t||"true"==t?"loop=1&":""))+'title=0&byline=0&portrait=0" width="700" height="500" frameborder="0" mozallowfullscreen webkitallowfullscreen allowfullscreen></iframe>';v(".ak-video-container",a).append(e)},init_soundcloud:function(a){var i=v(a).attr("data-src"),i='<iframe class="lazyload" data-src="https://w.soundcloud.com/player/?url='+encodeURIComponent(i)+'" width="700" height="500" frameborder="0"></iframe>';v(".ak-video-container",a).append(i)},init_audio:function(a){var i="",t="",i="<audio preload='none' style='width: 100%; visibility: hidden;' controls='controls'>"+(i=""!==v(a).data("mp3")?"<source type='audio/mpeg' src='"+v(a).data("mp3")+"' />":i)+(t=""!==v(a).data("ogg")?"<source type='audio/ogg' src='"+v(a).data("ogg")+"' />":t)+"</audio>",t=(v(a).append(i),{});(t="undefined"!=typeof _wpmejsSettings?_wpmejsSettings:t).success=function(a){var i,t;"flash"===a.pluginType&&(i=a.attributes.autoplay&&"false"!==a.attributes.autoplay,t=a.attributes.loop&&"false"!==a.attributes.loop,i&&a.addEventListener("canplay",function(){a.play()},!1),t&&a.addEventListener("ended",function(){a.play()},!1))},v(a).find("audio").mediaelementplayer(t)},init_video_html5:function(a){var i,t=this,e=v(a),n=v(a).parents(".ak-featured-cover"),o=["ak-player-wrap","ak-player-responsive","ak-video-container"],s=(e.addClass("ak-video-setup"),v(a).data("cover")),l="yes"===v(a).data("is-gif"),c="yes"===v(a).data("controls"),r="",p="",d="preload='auto'",s=(l?d+=" loop='loop' muted='muted'":c&&(d+=" controls"),"<video width='100%' height='auto' poster='"+s+"' "+d+">"+(r=""!==v(a).data("mp4")?"<source type='video/mp4' src='"+v(a).data("mp4")+"' />":r)+(p=""!==v(a).data("webm")?"<source type='video/webm' src='"+v(a).data("webm")+"' />":p)+"</video>");l?(i=v('<div class="ak-player-overlay"><div class="ak-player-control">GIF</div></div>').insertBefore(e),o.push("ak-gif-wrap")):c||((d="")!==(r=v(a).data("length"))&&(d+='<div class="ak-video-length">'+r+"</div>"),i=v('<div class="ak-player-overlay"><div class="ak-player-control"><i class="fa fa-play"></i></div>'+(d+='<div class="ak-video-sound-toggle off"><i class="ak-icon fa fa-volume-off"></i><i class="ak-icon fa fa-volume-up"></i></div>')+"</div>").insertBefore(e)),e.append(s),e.add(i).wrapAll(v("<div />",{class:o.join(" ")})),v(".ak-player-wrap",n).on("click",function(a){a.preventDefault(),t.initClick(v(this))}),t.initPlayerWrapWayPoint(n)},init_gif:function(a,i){var i=void 0!==i?i:".ak-featured-cover",t=this,e=v(a),a=v(a).parents(i),i=(e.addClass("ak-video-setup ak-player-image"),e.removeAttr("autoplay"),e.removeAttr("controls"),v('<div class="ak-player-overlay"><div class="ak-player-control">GIF</div></div>').insertBefore(e)),n=v("<canvas />",{class:"ak-player-canvas"}).attr({width:0,height:0}).insertBefore(e),i=e.add(i).add(n).wrapAll(v("<div />",{class:["ak-player-wrap","ak-player-responsive","ak-gif-wrap"].join(" ")})).parent();a.html(i),i.on("click",function(a){a.preventDefault(),t.initClick(v(this))}),e.imagesLoaded().progress(function(a,i){var t=v(i.img).siblings("canvas"),e="transitionend webkitTransitionEnd oTransitionEnd otransitionend",n=v(i.img).width(),o=v(i.img).height();t.attr({width:n,height:o}),t[0].getContext("2d").drawImage(v(i.img).get(0),0,0,n,o),t.addClass("ak-player-canvas-ready").on(e,function(){v(this).off(e),v(i.img).addClass("ak-player-image-ready")})}),t.initPlayerWrapWayPoint(a)},initClick:function(a){var i=this,a=v(a).hasClass("ak-player-wrap")?v(a):v(a).find(".ak-player-wrap"),t=a.hasClass("ak-player-active");i.stopPlay(i.current_el),a.hasClass("ak-gif-wrap")?(i.play_flag=!t,t?i.stopPlay(a):i.startPlay(a)):(i.play_flag=!0,i.sound_flag=!i.sound_flag,i.startPlay(a))},initPlayerWrapWayPoint:function(a){var t=this;v(".ak-player-wrap",a).each(function(){var i=v(this);v(this).hasClass("point-initted")||(v(this).addClass("point-initted"),v(this).waypoint(function(a){"down"===a&&(t.stopPlay(t.current_el),t.play_flag&&t.startPlay(i))},{offset:"20%",context:window}),v(this).waypoint(function(a){"up"===a&&(t.stopPlay(t.current_el),t.play_flag&&t.startPlay(i))},{offset:"0%",context:window}))})},startPlay:function(a){var i;!1!==a&&(this.toggleVideo(v(a),this.play_flag),this.toggleAudio(v(a),this.sound_flag),v(a).addClass("ak-player-active"),v(a).hasClass("ak-gif-wrap")&&(i=v(a).find("canvas"),v(i).removeClass("ak-player-canvas-ready").addClass("ak-player-canvas-active")),this.current_el=v(a))},stopPlay:function(a){!1!==a&&(this.toggleVideo(a,!1),this.toggleAudio(a,!1),v(a).removeClass("ak-player-active"),v(a).hasClass("ak-gif-wrap")&&(a=v(a).find("canvas"),v(a).removeClass("ak-player-canvas-active").addClass("ak-player-canvas-ready")),this.current_el=!1)},toggleAudio:function(a,i){var t;v(a).find("video").length&&(t=v(a).find("video")[0],a=v(a).find(".ak-video-sound-toggle"),t.muted=!i,i?a.removeClass("off"):a.addClass("off"))},toggleVideo:function(i,a){var t,e;v(i).find("video").length&&(t=this,e=v(i).find("video")[0],a?e.play():e.pause(),e.onended=function(a){t.stopPlay(v(i))})},youtube_parser:function(a){a=a.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);if(a&&11===a[7].length)return a[7];window.alert("Url Incorrect")},vimeo_parser:function(a){var i=a.match(/http:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/);return(i=i||a.match(/https:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/))?i[2]:void window.alert("not a vimeo url")}},newsy.video.init(),window.newsy.video_playlist={init:function(a){var i=this;void 0===a&&(a=v("body")),v(a).find(".ak-block-video-playlist").length&&v(a).find(".ak-block-video-playlist").each(function(){i.init_playlist(this)})},init_playlist:function(a){!v(a).hasClass("ak-video-playlist-inited")&&v(a).find(".ak-video-playlist-player-wrap").length&&(v(a).hasClass("ak-video-playlist-vertical")?this.vertical_playlist(a):this.horizontal_playlist(a),this.on_click(a),v(a).addClass("ak-video-playlist-inited"))},vertical_playlist:function(o){var o=v(o),s=v(o).hasClass("ak-block-width-1"),a=(o.find(".ak-video-playlist-list-inner-wrap").jScrollPane(),o.find(".ak-video-playlist-list-inner-wrap").data("jsp"));function i(a){var i=o.find(".ak-video-playlist-playing-wrap"),t=o.find(".ak-video-playlist-player-wrap"),e=o.find(".ak-video-playlist-list-inner-wrap"),n=t.height(),n=s||v(window).width()<768?250:t.height()-i.outerHeight();e.height(n),a&&a.reinitialise()}v(window).on("resize",function(){i(a)}),i(a)},horizontal_playlist:function(a){var i=(a=v(a)).width(),i=Math.floor(i/160),t=i-1,e=a.hasClass("ak-video-playlist-dark")?0:10;a.Ak_Slider({container:".ak-video-playlist-list-inner-wrap",rtl:1==n,lazyLoad:!0,loop:!1,nav:!1,controls:!0,items:i,gutter:e,navPosition:"top",autoHeight:!0,responsive:{0:{items:2},480:{items:3},568:{items:4},768:{items:t},1024:{items:i}}})},on_click:function(a){var n=this;(a=v(a)).find(".ak-video-playlist-item").on("click",function(a){a.preventDefault();var a=v(this).data("id"),i=v(this).parents(".ak-block-video-playlist"),t=v(i).find(".ak-video-playlist-player-holder"),e=v(i).attr("id"),e=window[e];return v(i).find("a.ak-video-playlist-item").removeClass("active"),v(this).addClass("active"),v(t).css("height",v(i).height()).html('<div class="ak-loading-box" style="display:block">'+newsy_block_loc.loader_html+"</div>"),n.load_item(this,e[a]),!1})},load_item:function(a,i){var t=v(a).parents(".ak-block-video-playlist"),e=v(t).find(".ak-video-playlist-player-holder"),t=v(t).find(".ak-video-playlist-playing-title"),i=(v(e).html(i),newsy.video.init(v(e)),"<a href='"+v(a).attr("href")+"'>"+v(a).find(".ak-video-playlist-item-title").text()+"</a>");v(e).css("height","auto"),v(t).find("h2").html(i)}},newsy.video_playlist.init(),window.newsy.pagination={init:function(a){var i=n?['<i class="fa fa-angle-right" aria-hidden="true"></i>','<i class="fa fa-angle-left" aria-hidden="true"></i>']:['<i class="fa fa-angle-left" aria-hidden="true"></i>','<i class="fa fa-angle-right" aria-hidden="true"></i>'],t=(a=void 0===a?e:a).find(".ak-pagination-container"),t=(t.length&&t.Ak_Pagination({is_rtl:1==n,ajax_action:"ajax_block_pagination",loading_html:newsy_block_loc.loader_html,masonry_item_class:".ak-module",pagination_wrap_class:".ak-block-posts"}),a.find(".ak-masonry")),t=(t.length&&t.Ak_Pagination({is_rtl:1==n,masonry_item_class:".ak-module",pagination_wrap_class:".ak-block-posts"}),a.find(".ak-slider-1")),t=(t.length&&t.Ak_Slider({rtl:1==n,autoWidth:!0,controlsText:i,container:".ak-block-posts"}),a.find(".ak-slider-2")),t=(t.length&&t.Ak_Slider({rtl:1==n,controlsText:i,container:".ak-block-posts"}),a.find(".ak-slider-3")),t=(t.length&&(t.Ak_Slider({rtl:1==n,controlsText:i,container:".ak-block-posts"}),v(".ak-slider-dots-style-4 .tns-nav button,.ak-slider-dots-style-5 .tns-nav button").on("mouseover",function(a){a.preventDefault(),a.stopPropagation(),v(this).trigger("click")})),a.find(".ak-slider-4")),t=(t.length&&t.Ak_Slider({rtl:1==n,controlsText:i,container:".ak-block-posts",navContainer:".ak-slider-nav",navAsThumbnails:!0,navSettings:{gutter:10,items:5,responsive:{0:{items:4,sliderBy:4},768:{items:6,sliderBy:6},1024:{items:7,sliderBy:7}}}}),v(".ak-slider-5",a)),t=(t.length&&t.Ak_Slider({rtl:1==n,controlsText:i,container:".ak-block-posts",navContainer:".ak-slider-nav",navAsThumbnails:!0,navSettings:{gutter:10,items:5,axis:"vertical"}}),v(".ak-block-newsticker",a));t.length&&t.Ak_Slider({rtl:1==n,controlsText:i,container:".ak-block-posts",axis:"vertical",animateNormal:"",navPosition:"bottom"})}},newsy.pagination.init(),v(".ak-pagination-container").on("ak-pagination-after-response",function(a,i){newsy.video.init(v(i))}),window.newsy.block_ajax={init:function(a){a=v(void 0===a?"body":a),newsy.pagination.init(a),newsy.video.init(a),newsy.video_playlist.init(a),newsy.share&&newsy.share.init(a),newsy.main&&(newsy.main.setup_menu(a),newsy.main.init_more_menu())}},v(document).on("newsy-ajax-load",function(a,i){newsy.block_ajax.init(v(i))})}(jQuery);